###  TCP【滑动窗口，丢包，HTTP传输过程，HTTPS传输过程，三次握手，四次挥手】
1. 流量控制引发的死锁
 发送者发送一个窗口为0的应答，发送者便停止发送，等待着接受者的下一个应答；这是接受者收到了这个窗口为0的应答，便发送一个窗口不为0的应答给发送者；
 但是这个窗口不为0的应答，在发送的过程中丢失，而接受者以为发送者已经接受到了，此时便会处于等待状态。

 这个和丢包不同的是，丢包时，发送者不会进入等待状态，而是会一直发送数据【快重传算法】。

 为了避免死锁的发生，TCP流量控制会在发送一个窗口为0的应答时，启用一个持续计时器。每当发送者接受到一个窗口为0的应答后就启用改计时器。时间一到便会
 主动发送报文询问接受者的窗口大小。

 2. 拥塞控制
 作用于网络的，避免发送过多的数据到网络中，使得网络负载过大。

 假定：1）数据的单方面传输的，另一个窗口只发送确认。2）接受方缓存足够大，因此发送方的窗口大小取决于网络的拥塞程度。
  - 慢开始算法

  发送方维护一个cwnd的拥塞窗口，这个变量的大小取决于网络的拥塞程度，并且动态的变化，不考虑接受方缓存的情况下。

  慢开始算法，一开始发送一个很小的cwnd，慢慢的加大「一开始为1，随后呈现指数增长」，慢慢的探查网络的拥塞程度。

  - 拥塞避免算法

  设定一个ssthresh的初始值，如果慢开始算法达到了这个值，cwnd就会呈现线性增长，如果此时出现网络拥塞，cwnd重新设为1，重新执行一遍慢开始算法和拥塞避免
  算法。

  - AIMD “乘法减少”和“加法增大”

  无论是在哪个阶段，如果发送方判定出现网络拥塞，就会把ssthresh慢开始算法门限，设置为原来拥塞窗口的一半，此时没有出现拥塞，就会慢慢的加大ssthrest


tip：快重传算法，接受方在接受到一个失序的报文段，立即发送重复确认


### HTTPS的连接过程

- 客户端发送请求，同时发送自己支持的加密规则（对称加密，摘要算法【用于检验证书的有效性】，非对称加密）；
- 服务端发送证书、hash算法和公钥【自己保留一个私钥，证书是CA颁发的】；
- 客户端验证证书的有效性，有效则使用公钥【这个是非对称加密的，证书是为了保证这个公钥的正确性】加密自己的一对私钥【对称加密】，将其中一个私钥给服务器，使用hash
算法对握手消息加密。
> 客户端保存这个CA对这个服务器域名的证书，使用CA公钥便可拿到数据指纹；使用摘要算法解密证书，对比数据指纹
- 服务器拿到这个私钥，建立SSL握手过程；
- 服务器使用这个私钥加密传输的数据；
- 客户端使用私钥解密这个数据，展示到浏览器中。

总结：非对称加密算法用于在握手过程中加密生成的密码；对称加密算法用于对真正传输的数据进行加密；HASH算法用于验证数据的完整性


### HTTP自动转到HTTPS
HSTS HTTP Strict Transport Security <br/>
302跳转会存在中间人攻击 <br/>
如果一个没有访问过，也会出现这个问题，浏览器内置一些流量大的网站


### 数字签名，报文摘要的原理
> 服务器保证了2点：<br/>1、改报文是出自我之手【使用私钥加密，公钥公开，私钥只有自己有】；<br/>2、该报文在传输的过程中，没有被篡改【使用摘要算法，只要报文改了，摘要就会变化】。


1. 使用摘要算法对密文获得一个散列值【这个值不可逆，只要密文被改了，这个散列值就会变化】；
2. 使用RSA算法和私钥【这里发生方使用的非对称加密】对这个散列值加密，这就是数字签名。【因为私钥只有你才有，所有保证了这个信息是你发送的】；
3. 将数字签名和密文发送；
4. 接受方在密文中使用摘要算法【相同的摘要算法，如果密文被改了，散列值就不一样了】得出一个散列值；
5. 接受方使用公钥和RSA算法解密数字签名得出一个散列值；
6. 对比这2个散列值就可以确认这个报文是发送方发出的，并且没有被篡改。


### 在浏览器中输入www.baidu.com会发生什么？


###  互联网协议
 1. 以太网协议

 数据帧 = 标头 + 标体 <br/>
 标头：18个字节 【包括发送者和接受者的信息】<br/>
 标体：>= 46个字节; <= 1500个字节

 2. MAC地址

 每个能上网的设备都有一个网卡，每个网卡出厂时，都会有一个独一无二的编号，长度为48个二进制位

3. 广播
> ARP协议
- 5层网络协议层
  
  应用层 【规定数据格式】
  传输层 【规定端口号，确定是哪个服务】
  网络层 【通过ip地址，知道在哪个子网下】
  链接层 【MAC地址】
  物理层 【网线等实体传播01信号的东西】

- 一台电脑能联网必须有4个信息<br/>
  1. 自己的ip;
  2. 自己的子网掩码【确定自己在哪个子网下，确定2个ip是否在同一个ip下】;
  3. 网关ip【通过网关，将mac地址设为FF:FF:FF:FF广播，得到目标ip的ip实现通信】;
  4. DNS服务器ip地址【ip地址的印射】。


### 浏览器验证网站数字签名的流程【HTTPS】

#### 概念
1. CA下放的证书
> 是一个证书链，也就是一层层的证书，从根证书开始，到下级CA，一层一层，最后一层就是网站证书
2. 证书的签名
> 通过签名算法和上级CA的私钥生成的，浏览器可以使用上级的公钥解密


